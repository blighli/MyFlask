{% extends "admin_base.html" %}
{% block css %}
    {{ css_file("dataTables.bootstrap.css") }}
{% endblock %}
{% block js %}
    {{ js_file("jquery.dataTables.min.js") }}
    {{ js_file("dataTables.bootstrap.js") }}
    <script>
        $(function() {
            var dataTable = $('#dataTable').dataTable({
                language: {
                    "url": "{{ url_for('static',filename='js/Chinese.json') }}"
                },
                lengthChange: false,
                ordering: false,
                initComplete: function() {
                    $("#dataTable").show();
                    var table_toolbar = $("#table_toolbar").detach();
                    var toolbar = $("#dataTable_filter").parent().prev();
                    toolbar.append(table_toolbar);
                },
                drawCallback: function() {
                    var table_select_all = $(".table_select_all");
                    table_select_all.prop("checked", null);
                    var table_select_id = $(".table_select_id");
                    table_select_id.prop("checked", null);
                    table_select_all.click(function () {
                        table_select_id.each(function () {
                            $(this).prop("checked", table_select_all.prop("checked"));
                        });
                    });
                    $("#table_btn_del").click(function () {
                        table_select_id.each(function () {
                            if ($(this).prop("checked")) {
                                console.log($(this).prop("value"));
                            }
                        });
                    });
                }
            });
        } );
    </script>
{% endblock %}

{% block mainContent %}
    <div id="table_toolbar" class="btn-group" role="group">
        <a id="table_btn_add" class='btn btn-default'><i class="glyphicon glyphicon-plus"></i> 新建</a>
        <a id="table_btn_del" class='btn btn-default'><i class="glyphicon glyphicon-trash"></i> 删除</a>
    </div>
    <table id="dataTable" class="table table-bordered table-striped table-hover" cellspacing="0" width="100%" style="display: none">
        <thead>
        <tr>
            {% block tableHead %}
            {% endblock %}
        </tr>
        </thead>
        <tbody>
        {% for item in items %}
            {% set itemLoop = loop %}
            <tr>
                {% block tableRow scoped %}
                {% endblock %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}